#include <stdio.h>
#include <string.h>

int lrsLength(char S[])
{
    int m = strlen(S);
    int L[100][100];

    for (int i = 0; i <= m; i++)
    {
        for (int j = 0; j <= m; j++)
        {
            if (i == 0 || j == 0)
            {
                L[i][j] = 0;
            }
            else if (S[i - 1] == S[j - 1] && i != j)
            {
                L[i][j] = L[i - 1][j - 1] + 1;
            }
            else
            {
                L[i][j] = (L[i - 1][j] > L[i][j - 1]) ? L[i - 1][j] : L[i][j - 1];
            }
        }
    }
    return L[m][m];
}

void printLRS(char S[])
{
    int m = strlen(S);
    int L[100][100];
    char lrs[100];
    int index = 0;

    for (int i = 0; i <= m; i++)
    {
        for (int j = 0; j <= m; j++)
        {
            if (i == 0 || j == 0)
            {
                L[i][j] = 0;
            }
            else if (S[i - 1] == S[j - 1] && i != j)
            {
                L[i][j] = L[i - 1][j - 1] + 1;
            }
            else
            {
                L[i][j] = (L[i - 1][j] > L[i][j - 1]) ? L[i - 1][j] : L[i][j - 1];
            }
        }
    }

    int i = m, j = m;
    while (i > 0 && j > 0)
    {
        if (S[i - 1] == S[j - 1] && i != j)
        {
            lrs[index++] = S[i - 1];
            i--;
            j--;
        }
        else if (L[i - 1][j] > L[i][j - 1])
        {
            i--;
        }
        else
        {
            j--;
        }
    }

    for (int k = index - 1; k >= 0; k--)
    {
        printf("%c", lrs[k]);
    }
    printf("\n");
}

int main()
{
    char S[100];
    printf("Enter string: ");
    scanf("%s", S);
    printf("Length of LRS: %d\n", lrsLength(S));
    printf("LRS: ");
    printLRS(S);
    return 0;
}
